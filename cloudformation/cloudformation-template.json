{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Resources": {
        "EC2WebApp": {
            "Type": "AWS::EC2::Instance",
            "Properties": {
                "InstanceType": "t2.micro",
                "ImageId": "ami-0629230e074c580f2",
                "SecurityGroupIds": [
                    "sg-003a584ce7c13e0f0"
                ],
                "Tags": [{
                        "Key": "Name",
                        "Value": "EC2WebApp"
                    }
                ],
                "KeyName": "aws-ec2-ssh-key"
            },
            "DependsOn": [
                "DynamoTableBooks"
            ]
        },
        "DynamoTableBooks": {
            "Type": "AWS::DynamoDB::Table",
            "Properties": {
                "KeySchema": [{
                        "AttributeName": "ISBN",
                        "KeyType": "HASH"
                    }
                ],
                "AttributeDefinitions": [{
                        "AttributeName": "ISBN",
                        "AttributeType": "S"
                    }
                ],
                "ProvisionedThroughput": {
                    "ReadCapacityUnits": 5,
                    "WriteCapacityUnits": 5
                },
                "Tags": [{
                        "Key": "Name",
                        "Value": "DynamoTableBooks"
                    }
                ],
                "TableName": "stack-books"
            }
        },
		"S3LogStorage": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
                "Tags": [{
                        "Key": "Name",
                        "Value": "S3LogStorage"
                    }
                ],
                "BucketName": "stack-logstorage"
            }
        },
        "SQSLogger": {
            "Type": "AWS::SQS::Queue",
            "Properties": {
                "Tags": [{
                        "Key": "Name",
                        "Value": "SQSLogger"
                    }
                ],
                "QueueName": "stack-sqsloggerqueue"
            },
            "DependsOn": [
                "EC2WebApp"
            ]
        }
    }
}
